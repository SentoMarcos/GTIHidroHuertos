<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Pagina UF</title>
    <!-- Carga del css de boostrap-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
          integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!--aqui estan los archivos css-->
    <link rel="stylesheet" href="../css/general.css">
    <link rel="stylesheet" href="../css/usuarioFinal.css">
    <!-- Set del viewport para que la pagina sea responsive-->
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
</head>
<!--<body onload="GraficaHumedad(), GraficaLuminosidad(), GraficapH(), GraficaSalinidad(), GraficaTemperatura()">-->
<body>
<header class="encabezado" role="banner"> <!--que rol esta desempenyando-->
    <div class="logo"><a href="../../index.html"><img src="../../img/logo.jpeg" alt="logo GTI"></a></div>

    <!--aqui va la bienvenida y el selector de huertos en la vista de escritorio-->
    <div class="selectorDesktop">
        <div class="Greeting">Buenos días, <span id="nombreUsuarioSpan">Charles</span>!</div>
        <div class="Mensaje">Asi se encuentra su huerto:</div>
        <div class="MenuDesplegableHuerto">
            <button class="Ajustes" id="ajustesdesktop"><i class="bi bi-gear-fill"></i></button>
            <!--selector de huertos de desktop y sus opciones-->
            <select id="Huertos1" class="huertos" name="NumeroHuerto1">
                <option value="Huerto 1">Huerto 1</option>
                <option value="Huerto 2">Huerto 2</option>
                <option value="Huerto 3">Huerto 3</option>
                <option value="Huerto 4">Huerto 4</option>
                <option value="Huerto 5">Huerto 5</option>
            </select>
        </div>
    </div>

    <div class="notisycerrar">
        <!--aqui va el boton de notificaciones-->
        <button class="notificaciones" id="notificaciones"><i class="bi bi-bell-fill"></i></button>
        <!--aqui va el boton cerrar sesion-->
        <div>
            <button type="button" class="boton-cerrarsesion" id="boton-cerrarsesion">Cerrar sesión</button>
        </div>
    </div>
</header>
<!----------------------------------------------------------------
Inicio de seccion intermedia
---------------------------------------------------------------------->
<section class="Seccion_Intermedia">
    <div class="selectorMovil">
        <div class="Greeting" id="nombreUsuario">Buenos dias, Charles!</div>
        <div class="Mensaje">Asi se encuentra su huerto:</div>
        <div class="MenuDesplegableHuerto">
            <button class="Ajustes" id="ajustesmovil"><i class="bi bi-gear-fill"></i></button>
            <!--selector de huertos de movil y sus opciones-->
            <select id="Huertos2" class="huertos" name="NumeroHuerto2">
                <option value="Huerto 1">Huerto 1</option>
                <option value="Huerto 2">Huerto 2</option>
                <option value="Huerto 3">Huerto 3</option>
                <option value="Huerto 4">Huerto 4</option>
                <option value="Huerto 5">Huerto 5</option>
            </select>
        </div>
    </div>
    <!--
     class="MenuDesplegableHuerto" es el menu desplegable que se utilizara
     para elegir entre los diferentes huertos a disposicion del usuario
    -->
    <h2>Parametros del huerto</h2>
</section>
<!----------------------------------------------------------------
            fin de seccion intermedia
---------------------------------------------------------------------->
<!----------------------------------------------------------------------
Inicio de seccion graficas y sensores, partiendo desde humedad hasta pH
---------------------------------------------------------------------->
<section class="graficasysensores">
    <!---------------------------
         Sensor de humedad
    ---------------------------->
    <div class="graficadeuf">
        <div class="headergrafica">
            <h4>Humedad</h4>
            <p>Hoy</p>
        </div>
        <div class="grafica" id="grafica">
            <h1 id="valor-medida-actual-1">Cargando...</h1>
            <label>porcentaje de humedad</label>
            <!--este es el boton por el cual se llama al pop up de filtrar-->
            <button class="boton-calendario" id="calendario1"><i class="bi bi-calendar"></i></button>
            <!--aqui es donde se recibe el script de la grafica-->
            <div class="mensaje">
                <canvas id="GrafHumedad"></canvas>
            </div>
        </div>
    </div>
    <!---------------------------
       Sensor de salinidad
    ---------------------------->
    <div class="graficadeuf">
        <div class="headergrafica">
            <h4>Salinidad</h4>
            <p>Hoy</p>
        </div>
        <div class="grafica">
            <h1 id="valor-medida-actual-2">Cargando...</h1>
            <label>gramos de sal</label>
            <!--este es el boton por el cual se llama al pop up de filtrar-->
            <button class="boton-calendario" id="calendario2"><i class="bi bi-calendar"></i></button>
            <!--aqui es donde se recibe el script de la grafica-->
            <div class="mensaje">
                <canvas id="GraficaSalinidad"></canvas>
            </div>
        </div>
    </div>
    <!---------------------------
       Sensor de temperatura
    ---------------------------->
    <div class="graficadeuf">
        <div class="headergrafica">
            <h4>Temperatura</h4>
            <p>Hoy</p>
        </div>
        <div class="grafica">
            <h1 id="valor-medida-actual-3">Cargando...</h1>
            <label>grados centigrados</label>
            <!--este es el boton por el cual se llama al pop up de filtrar-->
            <button class="boton-calendario" id="calendario3"><i class="bi bi-calendar"></i></button>
            <!--aqui es donde se recibe el script de la grafica-->
            <div class="mensaje">
                <canvas id="GraficaTemperatura"></canvas>
            </div>
        </div>
    </div>
    <!---------------------------
       Sensor de luminosidad
    ---------------------------->
    <div class="graficadeuf">
        <div class="headergrafica">
            <h4>Luminosidad</h4>
            <p>Hoy</p>
        </div>
        <div class="grafica">
            <h1 id="valor-medida-actual-4">Cargando...</h1>
            <label> lux de luminosidad</label>
            <!--este es el boton por el cual se llama al pop up de filtrar-->
            <button class="boton-calendario" id="calendario4"><i class="bi bi-calendar"></i></button>
            <!--aqui es donde se recibe el script de la grafica-->
            <div class="mensaje">
                <canvas id="GraficaLuminosidad"></canvas>
            </div>
        </div>
    </div>
    <!---------------------------
           Sensor de pH
    ---------------------------->
    <div class="graficadeuf">
        <div class="headergrafica">
            <h4>pH</h4>
            <p>Hoy</p>
        </div>
        <div class="grafica">
            <h1 id="valor-medida-actual-5">Cargando...</h1>
            <label>nivel de<br>pH</label>
            <!--este es el boton por el cual se llama al pop up de filtrar-->
            <button class="boton-calendario" id="calendario5"><i class="bi bi-calendar"></i></button>
            <!--aqui es donde se recibe el script de la grafica-->
            <div class="mensaje">
                <canvas id="GraficapH"></canvas>
            </div>
        </div>
    </div>
</section>
<!--------------------------------------------------------------------
       Fin de seccion los sensores y graficas
--------------------------------------------------------------------->

<!--------------------------------------------------------------------
       Inicio de seccion pie de pagina.
--------------------------------------------------------------------->
<div class="PiePagina">
    <div class="Copyright">Copyright 2023 All rights Reserved</div>
    <div class="Version">1.0.0.0</div>
</div>
<!--------------------------------------------------------------------
                  Fin pie de pagina
--------------------------------------------------------------------->

<!----------------------------------
       pop up cerrar sesion
----------------------------------->
<dialog id="cerrarsesion">
    <div class="cerrarsesionpopup">
        <h3>¿Desea cerrar sesión?</h3>
        <div class="botonespopup">
            <button class="botonpopup" id="si-cerrar">Si</button>
            <button class="botonpopup" id="no-cerrar">No</button>
        </div>
    </div>
</dialog>
<!--script de cerrar sesion-->
<script>
    const botoncerrarsesion = document.getElementById("boton-cerrarsesion");
    const popupcerrar = document.getElementById('cerrarsesion');
    const botonsi = document.getElementById('si-cerrar');
    const botonno = document.getElementById('no-cerrar');
    //se recogen los identificadores de la maquetacion y se agrega un listener para escuchar
    //cuando el usuario hace click y se debe mostrar o cerrar el pop up

    botoncerrarsesion.addEventListener('click', () => {
        popupcerrar.showModal();
        popupcerrar.style.display = "block";
    });

    botonno.addEventListener('click', () => {
        popupcerrar.close();
        popupcerrar.style.display = "none";
    });

    botonsi.addEventListener('click', () => {
        window.location.replace('../../index.html')
    }); //le manda a la landing page si confirma el cierre de sesion
</script>
<!----------------------------------
       pop up filtrar fecha
----------------------------------->
<dialog id="popupfiltrar">
    <div class="popupfiltrar">
        <h3>Filtrar muestras</h3>
        <form>
            <div class="desdeyhasta">
                <label for="fecha-desde">Desde:</label>
                <input type="date" id="fecha-desde" class="inputpopup" name="fecha-desde"><br>
            </div>
            <div class="desdeyhasta">
                <label for="fecha-hasta">Hasta:</label>
                <input type="date" id="fecha-hasta" class="inputpopup" name="fecha-hasta"><br>
            </div>
            <div class="botonespopup">
                <button class="botonpopup" id="aceptar-filtrar">Filtrar</button>
                <button class="botonpopup" id="cancelar">Cancelar</button>
            </div>
        </form>
    </div>
</dialog>
<!----------------------------------
       pop ups preferencias
----------------------------------->
<dialog id="popuppreferencias">
    <div class="popuppreferencias">
        <button class="cerrarpopup">x</button>
        <h3>Preferencias del huerto</h3>
        <button class="botonpopup" id="boton-limites">Limites</button>
        <button class="botonpopup" id="boton-renombrar">Renombrar</button>
    </div>
</dialog>
<!--limites-->
<dialog id="popuppreferencias-li">
    <div class="popuppreferenciashijos">
        <h3>Limites de tolerancia del cultivo</h3>
        <select name="Sensores" class="inputpopup">
            <option value="Humedad">Humedad</option>
            <option value="Salinidad">Salinidad</option>
            <option value="Temperatura">Temperatura</option>
            <option value="Luminosidad">Luminosidad</option>
            <option value="pH">pH</option>
        </select>
        <div class="botonespopup">
            <input type="text" name="limitemenor" placeholder="Minimo" class="inputpopuppequeño">
            <input type="text" name="limitemayor" placeholder="Maximo" class="inputpopuppequeño">
        </div>
        <label>Se debe actualizar sensor a sensor</label>
        <button class="botonpopup" id="guardarlimites">Guardar</button>
    </div>
</dialog>
<!--renombrar-->
<dialog id="popuppreferencias-re">
    <div class="popuppreferenciashijos">
        <form class="popuppreferenciashijos" onsubmit="guardarRenombrar(event)">
            <!-- Contenido del pop-up para renombrar el huerto -->
            <h3>Renombrar cultivo</h3>
            <label>Nombre actual:</label>
            <input type="text" name="nombrehuertoactual" value="Huerto 1" readonly class="inputpopup">
            <label>Nuevo nombre:</label>
            <input type="text" name="nombrehuertonuevo" class="inputpopup">
            <button type="submit" class="botonpopup" id="guardarrenombrar">Guardar</button>
        </form>
    </div>
</dialog>
<!----------------------------------
       pop up notificaciones
----------------------------------->
<dialog id="popupnotificaciones">
    <div class="popupnotificaciones">
        <div class="arribanotis">
            <h4>Notificaciones</h4>
            <button class="cerrarnotis" id="cerrarnotis">x</button>
        </div>
        <div class="notif">
            <h5>Alerta humedad</h5>
            <p class="pnotif">El nivel de humedad ha bajado del 40%.</p>
        </div>
        <div class="notif">
            <h5>Instalacion</h5>
            <p class="pnotif">Lorem ipsum dolor sit amet</p>
        </div>
        <div class="notif">
            <h5>Mantenimiento</h5>
            <p class="pnotif">Le espera mantenimiento de su huerto en una semana.</p>
        </div>
        <div class="notif">
            <h5>Bienvenido</h5>
            <p class="pnotif">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maiores perferendis quidem
                voluptate?</p>
        </div>
    </div>
</dialog>
<!--script del pop up de notificaciones-->
<script>
    const popupnotif = document.getElementById('popupnotificaciones');
    const botonnotif = document.getElementById('notificaciones');
    const botoncerrarnotis = document.getElementById('cerrarnotis');
    //se recogen los identificadores de la maquetacion y se agrega un listener para escuchar
    //cuando el usuario hace click y se debe mostrar o cerrar el pop up

    botonnotif.addEventListener('click', () => {
        popupnotif.showModal();
        popupnotif.style.display = "block";
    })

    botoncerrarnotis.addEventListener('click', () => {
        popupnotif.close()
        popupnotif.style.display = "none";
    })
</script>
<!----------------------------------
       fin de los pop ups
----------------------------------->

<!-- Carga de las graficas -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script src="../js/graficasUsuarioFinal.js"></script>
<script src="../js/filtrarVentasPorFechas.js"></script>
<script src="../js/obtenerNombreHuertos.js"></script>
<script src="../js/preferenciasMonitorizacion.js"></script>
<script src="../../js/login.js"></script>

</body>
</html>